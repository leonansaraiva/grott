#Tool to test grott data processing.  
# Updated: 2021-07-21

verrel = "2.6.1"

import sys

from grottconf import Conf

from grottdata import procdata

#proces config file
conf = Conf(verrel)

#print configuration
if conf.verbose: conf.print()

#Specify overwrite .ini data 
conf.nomqtt = True

#growatt datarecord
xdata = "00320006010101040d222c4559454c74412d7761747447726f7761747447726f7761747447723e3a23464c75415d4150747447726f7761747447726f7761747447726f7774767d4b7c65756174746b726e776161064e776f6061746135726f7761747447726f7772cf67ce7b2a7774747454c96f7761747447726f7761747447726f7761747452726fd0d97796a77e6e7a61747447726f7761747447726f77617474477ce977617474475f6f2e2f547447726f776174624772df4161747447726f77617474f7446f7761747447726f7761747447726f7761747447726f7761747447786f776b287d457a9777607eb407066ef46ff376527ce87762747747656f7761747447726f6d03"

decrypt_online = '4a5043323831383333420000000000000000000000000000000000000000514d423238323332363100000000000000000000000000000000000000001502090c0e0a020000002c00010000157209050017000015720000000000000000000013bb138909450015000013bb00000000000000000000000000000000000000150000a7b803e2e00c010d0000000000000000000000000000000000000e8600000000002d00594e2000000000000000160000b03600000000000000000000b0360000000000000000000000000000000000000000000000000000000a00000a5c090208f800010ac0407401830e8702150e8700030003001700000000000000001a62'
decrypt_python = '4a5043323831383333420000000000000000000000000000000000000000514d423238323332363100000000000000000000000000000000000000001502090c0e0a020000002c00010000157209050017000015720000000000000000000013bb138909450015000013bb00000000000000000000000000000000000000150000a7b803e2e00c010d0000000000000000000000000000000000000e8600000000002d00594e2000000000000000160000b03600000000000000000000b0360000000000000000000000000000000000000000000000000000000a00000a5c090208f800010ac0407401830e8702150e8700030003001700000000000000001a62'
if(decrypt_online == decrypt_python):
    print('Sucesso')
#47726f77617474
data = bytes.fromhex(xdata)
procdata(conf,data)         